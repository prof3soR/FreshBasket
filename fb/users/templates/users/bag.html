{% extends 'users/base.html' %}
{% block content %}
{% load mathfilters %}
<style>
    .small-table {
        width: 30%;
        float: left;
        margin:5rem;
    }
    td,th{
      text-align: center;
    }
    .container-wrapper {
        width: 50%;
        float: left;
    }
    tr:active {
        opacity: 0.5;
    }

    .container {
        width: 45%;
        height: 200px;
        border: 2px solid black;
        border-radius: 10px;
        margin-right: 20px;
        margin-bottom: 20px;
        display: inline-block;
        text-align: center;
        vertical-align: top;
        overflow: auto;
    }

    .container label {
        display: block;
        font-weight: bold;
        margin-bottom: 10px;
    }

    /* Optional styling for the items */
    .small-table td {
        padding: 10px;
        border: 1px solid black;
        background-color: #F9F9F9;
    }
    .container {
        width: 45%;
        height: 200px;
        border: 2px solid black;
        border-radius: 10px;
        margin-right: 20px;
        margin-bottom: 20px;
        display: inline-block;
        text-align: center;
        vertical-align: top;
        overflow: auto;
    }

    .container table {
        width: 100%;
        border-collapse: collapse;
    }

    .container td, .container th {
        text-align: center;
        padding: 5px;
    }

    .container td img {
        width: 50px;
        height: 50px;
    }
    h1,h3{
      text-align: center;
    }
</style>

<h1>{{user.first_name}}'s Bag</h1>
<h3>Drag and drop your items in you bag to your respective baskets</h3>
<table class="small-table draggable">
    <thead>
    <tr >
        <th>Item Name</th>
        <th>Item Image</th>
        <th>Quantity</th>
        <th>price</th>
    </tr>
    </thead>
    <tbody>
      {% for bag_item in bag_items %}
      <tr draggable="true" ondragstart="event.dataTransfer.setData('text/plain', this.outerHTML)"> 
          <td>{{ bag_item.menu_item.name }}</td>
          <td><img src="{{ bag_item.menu_item.image.url }}" alt="{{ bag_item.menu_item.name }}" width="100px" height="100px"></td>
          <td>{{ bag_item.quantity }}</td>
          <td>â‚¹{{ bag_item.menu_item.price|floatformat:2|mul:bag_item.quantity }}</td>
      </tr>
  {% endfor %}
    </tbody>
</table>
<div class="container-wrapper">
  <div class="container" id="monday" ondragover="event.preventDefault()" ondrop="handleDrop(event, this)">
      <label>Monday</label>
      <table>
          <thead>
              <tr>
                  <th>Item Name</th>
                  <th>Item Image</th>
                  <th>Quantity</th>
                  <th>price</th>
              </tr>
          </thead>
          <tbody>
          </tbody>
      </table>
  </div>
  <div class="container" id="tuesday" ondragover="event.preventDefault()" ondrop="handleDrop(event, this)">
      <label>Tuesday</label>
      <table>
          <thead>
              <tr>
                  <th>Item Name</th>
                  <th>Item Image</th>
                  <th>Quantity</th>
                  <th>price</th>
              </tr>
          </thead>
          <tbody>
          </tbody>
      </table>
  </div>
  <div style="clear: both;"></div>
  <div class="container" id="wednesday" ondragover="event.preventDefault()" ondrop="handleDrop(event, this)">
      <label>Wednesday</label>
      <table>
          <thead>
              <tr>
                  <th>Item Name</th>
                  <th>Item Image</th>
                  <th>Quantity</th>
                  <th>price</th>
              </tr>
          </thead>
          <tbody>
          </tbody>
      </table>
  </div>
  <div class="container" id="thursday" ondragover="event.preventDefault()" ondrop="handleDrop(event, this)">
      <label>Thursday</label>
      <table>
          <thead>
              <tr>
                  <th>Item Name</th>
                  <th>Item Image</th>
                  <th>Quantity</th>
                  <th>price</th>
              </tr>
          </thead>
          <tbody>
          </tbody>
      </table>
  </div>
  <div style="clear: both;"></div>
  <div class="container" id="friday" ondragover="event.preventDefault()" ondrop="handleDrop(event, this)">
      <label>Friday</label>
      <table>
          <thead>
              <tr>
                  <th>Item Name</th>
                  <th>Item Image</th>
                  <th>Quantity</th>
                  <th>price</th>
              </tr>
          </thead>
          <tbody>
          </tbody>
      </table>
  </div>
  <div class="container" id="saturday" ondragover="event.preventDefault()" ondrop="handleDrop(event, this)">
      <label>Saturday</label>
      <table>
          <thead>
              <tr>
                  <th>Item Name</th>
                  <th>Item Image</th>
                  <th>Quantity</th>
                  <th>price</th>
              </tr>
          </thead>
          <tbody>
          </tbody>
      </table>
  </div>
</div>
<script>
  function handleDrop(event, container) {
      event.preventDefault();
      var tableRow = event.dataTransfer.getData('text/plain');
      container.querySelector('table tbody').insertAdjacentHTML('beforeend', tableRow);
  }
</script>
{% endblock %}